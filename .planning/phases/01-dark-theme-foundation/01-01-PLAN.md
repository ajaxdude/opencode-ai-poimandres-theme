---
phase: 01-dark-theme-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/generate-turquoise-palette.ts
  - scripts/validate-palette.ts
autonomous: true
must_haves:
  truths:
    - "Turquoise palette provides 5-7 distinct shades from darkest to lightest"
    - "All generated shades use base color #00CED1 as anchor"
    - "Shades maintain Poimandres aesthetic (similar saturation/chroma)"
    - "Script produces valid hex color codes"
  artifacts:
    - path: "scripts/generate-turquoise-palette.ts"
      provides: "Extended palette generation from base color"
      min_lines: 40
    - path: "scripts/validate-palette.ts"
      provides: "Palette consistency and quality validation"
      min_lines: 30
  key_links:
    - from: "scripts/generate-turquoise-palette.ts"
      to: "#00CED1"
      via: "base color reference"
      pattern: "#00CED1|00CED1"
---

<objective>
Generate extended turquoise color palette with 5-7 shades for visual hierarchy

Purpose: Create a comprehensive turquoise palette that expands Poimandres theme options while maintaining the original aesthetic
Output: Executable palette generation script with validation
</objective>

<execution_context>
@/home/papa/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/papa/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.opencode/themes/poimandres.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create palette generation script</name>
  <files>scripts/generate-turquoise-palette.ts</files>
  <action>
Create TypeScript script that generates 7 shades of turquoise from base color #00CED1 (Strong Turquoise):

1. **Algorithm Requirements:**
   - Base color: #00CED1 (RGB: 0, 206, 209)
   - Generate 7 shades:darkest (50), very-dark (100), dark (300), base (400), light (500), very-light (700), lightest (900)
   - Use lightness adjustment in HSL color space for perceptual uniformity
   - Maintain similar saturation (~70-80%) to preserve Poimandres aesthetic
   - Lightness range: ~15% (darkest) to ~90% (lightest)

2. **Implementation Details:**
   - Use native color manipulation (no external dependencies - this is a simple theme package)
   - Hex to RGB conversion function
   - RGB to HSL conversion function
   - HSL to RGB conversion function
   - RGB to Hex conversion function
   - Generate shades by adjusting lightness L while keeping H and S constant

3. **Output Format:**
   - JSON object with shade names and hex values
   - Example output:
     ```json
     {
       "poimandresTurquoise50": "#E0FFFF",
       "poimandresTurquoise100": "#BFFFFD",
       "poimandresTurquoise300": "#40E0D0",
       "poimandresTurquoise400": "#00CED1",
       "poimandresTurquoise500": "#00A8A8",
       "poimandresTurquoise700": "#005858",
       "poimandresTurquoise900": "#000808"
     }
     ```

4. **Naming Convention:**
   - Follow existing pattern: `poimandres{Color}{Scale}`
   - Use descriptive names: Turquoise50, Turquoise100, etc.

DO NOT use external color libraries (culori, chroma-js, etc.) - keep it simple with native color math.
  </action>
  <verify>
  ```bash
  # Run script and verify it produces valid JSON
  node scripts/generate-turquoise-palette.ts

  # Verify JSON is valid
  node -e "JSON.parse(require('fs').readFileSync('output.json', 'utf8')); console.log('Valid JSON')"

  # Verify all colors are valid hex
  node -e "const colors = JSON.parse(require('fs').readFileSync('output.json', 'utf8')); Object.values(colors).forEach(c => { if (!/^#[0-9A-Fa-f]{6}$/.test(c)) throw new Error('Invalid hex: ' + c); }); console.log('All colors valid')"
  ```
  </verify>
  <done>
  - Script executes without errors
  - Produces 7 valid hex color codes
  - Base shade matches #00CED1 exactly
  - Colors progress from darkest to lightest
  </done>
</task>

<task type="auto">
  <name>Task 2: Create palette validation script</name>
  <files>scripts/validate-palette.ts</files>
  <action>
Create TypeScript validation script that checks palette quality:

1. **Validation Checks:**
   - Verify all color values are valid 6-digit hex codes
   - Verify lightness progression (darkest → lightest)
   - Verify saturation stays within Poimandres aesthetic range (60-85%)
   - Verify color difference between adjacent shades is sufficient (≥10% lightness difference)

2. **Implementation:**
   - Read palette JSON from standard input or file argument
   - Calculate RGB, HSL values for each color
   - Sort shades by lightness to verify ordering
   - Print validation report with PASS/FAIL for each check
   - Exit with error code 1 if any check fails

3. **Output Format:**
   ```
   Palette Validation Report
   =======================
   ✓ All colors are valid hex codes
   ✓ Lightness progression is correct (50 → 900)
   ✓ Saturation within Poimandres range (60-85%)
   ✓ Color difference between shades sufficient (≥10%)
   ✓ All checks passed
   ```

4. **Usage:**
   ```bash
   # Validate generated palette
   node scripts/validate-palette.ts < palette.json

   # Or with file argument
   node scripts/validate-palette.ts --input palette.json
   ```

DO NOT use external validation libraries - implement checks using native color math.
  </action>
  <verify>
  ```bash
  # Run validation on generated palette
  node scripts/generate-turquoise-palette.ts > /tmp/palette.json
  node scripts/validate-palette.ts < /tmp/palette.json
  echo "Exit code: $?"  # Should be 0
  ```
  </verify>
  <done>
  - Script validates generated palette successfully
  - All validation checks pass
  - Exit code is 0 on success
  </done>
</task>

</tasks>

<verification>
1. Execute palette generation script
2. Verify output contains 7 valid hex colors
3. Run validation script on generated palette
4. Confirm all validation checks pass
5. Verify base shade matches #00CED1 exactly
</verification>

<success_criteria>
- Extended turquoise palette generated with 7 shades (50-900 scale)
- All shades are valid hex color codes
- Palette follows Poimandres aesthetic (similar saturation)
- Lightness progression verified (darkest to lightest)
- Validation script confirms palette quality
</success_criteria>

<output>
After completion, create `.planning/phases/01-dark-theme-foundation/01-01-SUMMARY.md`
</output>
