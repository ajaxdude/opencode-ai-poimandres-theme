# Phase 1 Research: Dark Theme Foundation

**Researched:** 2026-02-10
**Phase Goal:** Complete dark theme with validated accessibility and extended color palette

## Executive Summary

Phase 1 requires implementing a Poimandres-themed dark theme for a Nuxt 4 + Shadcn-vue application with WCAG AA accessibility compliance. Key implementation patterns involve Nuxt UI's token-based theming system, semantic token architecture (core/extension/component hierarchy), and Shadcn-vue's CSS variable-based theming approach.

## 1. Stack Details

### 1.1 Nuxt UI Theming System

**Core Architecture:**
Nuxt UI uses Tailwind CSS v4 with CSS variables as design tokens. The theming system provides:

- **CSS-first configuration**: Define tokens using `@theme` directive in CSS
- **Semantic color system**: 7 semantic color aliases (primary, secondary, success, info, warning, error, neutral)
- **Runtime configuration**: `app.config.ts` maps semantic colors to theme values
- **Built-in light/dark support**: Automatic mode switching via `prefers-color-scheme`

**Implementation Pattern:**
```css
/* assets/css/main.css */
@import "tailwindcss";
@import "@nuxt/ui";

@theme {
  /* Design tokens */
  --color-brand-50: #f0f9ff;
  --color-brand-100: #e0f2fe;
  --color-brand-200: #bae6fd;
  --color-brand-300: #75edae;
  --color-brand-400: #5DE4c7;  /* Poimandres Bright Mint */
  --color-brand-500: #00CED1;  /* Poimandres Strong Turquoise */
  --color-brand-600: #40E0D0;
  --color-brand-700: #008a8a;
  --color-brand-800: #006666;
  --color-brand-900: #004d4d;
  --color-brand-950: #002b2b;

  /* Typography */
  --font-sans: 'Inter', system-ui, sans-serif;
}
```

```typescript
// app.config.ts
export default defineAppConfig({
  ui: {
    colors: {
      primary: "brand",      // Maps to color-brand-* palette
      secondary: "brand",
      success: "brand",
      info: "brand",
      warning: "yellow",
      error: "red",
      neutral: "slate",
    },
  },
});
```

**Key Integration Points:**
1. **Token Resolution**: Tailwind v4 resolves `bg-primary` → `--color-brand-*` at build time
2. **Dark Mode**: Automatic `.dark` class application with color remapping
3. **Component Integration**: Shadcn-vue components consume these tokens automatically

### 1.2 Tailwind CSS v4 Integration

**Tailwind v4 Changes:**
- **`@theme` directive**: Replaces `tailwind.config.js` for tokens
- **CSS Variables First**: Uses native CSS custom properties
- **Better Performance**: Variable resolution at build time
- **No Config File**: Theme defined directly in CSS

**Semantic Token Generation:**
```css
@theme {
  /* Core palette (50-950 scale) */
  --color-brand-50 through --color-brand-950: <generated-shades>;

  /* Semantic mappings (auto-generated by Nuxt UI) */
  --ui-primary: var(--color-brand-500);
  --ui-primary-foreground: var(--color-white);
}
```

### 1.3 Shadcn-vue Theming Integration

**CSS Variable Pattern:**
Shadcn-vue uses CSS variables with `background` and `foreground` conventions:

```css
:root {
  /* Light mode defaults */
  --background: 0 0% 100%;           /* white */
  --foreground: 222.2 47.4% 11.2%;   /* dark text */
}

.dark {
  /* Dark mode overrides */
  --background: 222.2 84% 4.9%;       /* dark background */
  --foreground: 210 40% 98%;          /* light text */
}
```

**Integration with Nuxt UI:**
```typescript
// components.json (shadcn-vue config)
{
  "tailwind": {
    "cssVariables": true,
    "darkMode": "class"
  }
}
```

**Component Theming:**
- Shadcn-vue components reference CSS variables: `bg-background`, `text-foreground`
- Nuxt UI provides semantic utilities: `bg-primary`, `text-primary`
- Both systems compatible when using same variable naming

## 2. Architecture Patterns

### 2.1 Semantic Token Hierarchy

**Three-Layer Architecture:**

```
┌─────────────────────────────────────────┐
│   Layer 1: Core Tokens (Primitives)   │
│   - Raw hex/OKLCH values               │
│   - No semantic meaning                 │
│   Example: --color-brand-500: #00CED1    │
└─────────────────────────────────────────┘
              ↓ maps to
┌─────────────────────────────────────────┐
│   Layer 2: Extension Tokens (Semantic)  │
│   - Purpose and intent                   │
│   - Role-based naming                   │
│   Example: --ui-primary: var(--color-brand-500)│
└─────────────────────────────────────────┘
              ↓ maps to
┌─────────────────────────────────────────┐
│   Layer 3: Component Tokens (Specific)  │
│   - Component-scoped values               │
│   - Override extension tokens             │
│   Example: --button-primary-bg: var(--ui-primary)│
└─────────────────────────────────────────┘
```

**Token Naming Convention:**
```css
/* Core/Primitives: {color}-{scale} */
--color-brand-500
--color-slate-900

/* Extensions/Abstract: {purpose} */
--ui-primary
--ui-success
--text-default

/* Components: {component}-{element}-{state} */
--button-primary-bg
--card-border-active
--input-foreground-focus
```

### 2.2 Poimandres Color Palette Structure

**Base Poimandres Colors (from VS Code theme):**

| Color Name | Hex | Usage | Lightness |
|-----------|-----|-------|-----------|
| Background | #1b1e28 | Primary background | 22% |
| Focus/Panel | #303340 | Panel/element background | 24% |
| Primary Text | #a6accd | Default text color | 75% |
| Muted Text | #767c9d | Secondary text | 58% |
| Bright Mint | #5DE4c7 | Primary accent/success | 70% |
| Strong Turquoise | #00CED1 | Secondary accent | 81% |
| Light Blue | #ADD7FF | Tertiary accent | 88% |
| Hot Red | #d0679d | Error state | 52% |
| Bright Yellow | #fffac2 | Warning state | 99% |
| Pink | #f087bd | Emphasis/decoration | 70% |

**Extended Turquoise Palette (5-7 shades required):**
Generate using hue shift or lightness adjustments from #00CED1:

```css
/* Turquoise extension for visual hierarchy */
--color-turquoise-50: #E0FFFF;  /* Lightest */
--color-turquoise-100: #BFFFFD;
--color-turquoise-200: #80FFFF;
--color-turquoise-300: #40E0D0;
--color-turquoise-400: #00CED1;   /* Base */
--color-turquoise-500: #00A8A8;
--color-turquoise-600: #008080;
--color-turquoise-700: #005858;
--color-turquoise-800: #003030;
--color-turquoise-900: #000808;  /* Darkest */
```

**Generation Method:**
Use OKLCH color space for perceptual uniformity:
```javascript
// Generate turquoise shades
import { oklch } from 'culori';

const baseTurquoise = oklch('#00CED1');
const shades = {};

for (let i = 50; i <= 950; i += 50) {
  const lightness = 0.2 + (i / 950) * 0.6; // 20% to 80%
  shades[i] = oklch({ l: lightness, c: baseTurquoise.c, h: baseTurquoise.h });
}
```

### 2.3 State Layer Pattern

**Approach 1: Composable Tokens (Recommended)**
```css
/* Base tokens */
--ui-primary: var(--color-brand-500);
--ui-success: var(--color-brand-600);

/* State modifiers (CSS classes) */
.bg-primary:hover { background-color: oklch(from var(--color-brand-500) l(+5%)); }
.bg-primary:active { background-color: oklch(from var(--color-brand-500) l(+2%)); }
.bg-primary:focus-visible { outline: 2px solid var(--color-brand-500); }
```

**Approach 2: Stateful Tokens (Alternative)**
```css
/* Explicit state tokens */
--ui-primary-hover: oklch(from var(--color-brand-500) l(+5%));
--ui-primary-active: oklch(from var(--color-brand-500) l(+2%));
--ui-primary-focus: var(--color-brand-500);
```

**Recommendation for Poimandres:**
Use **Composable Tokens** for most components to reduce token count. Use **Stateful Tokens** for critical components (buttons, inputs) where precise control is needed.

## 3. Implementation Specifics

### 3.1 WCAG AA Validation Tools

**Recommended Validation Libraries:**

| Library | Type | Use Case |
|---------|------|-----------|
| `a11y-color-contrast` | TypeScript | Programmatic contrast checking in build/validation scripts |
| `accessible-colors` | JavaScript | Color generation with AA/AAA guarantees |
| `@mdhnpm/wcag-contrast-checker` | TypeScript | Full WCAG compliance check (AA/AAA, large text, UI components) |

**Implementation Pattern:**
```typescript
// scripts/validate-contrast.ts
import { wcagContrastChecker } from '@mdhnpm/wcag-contrast-checker';

function validateTheme(theme: ThemeConfig) {
  const pairs = [
    { text: theme.colors.textDefault, bg: theme.colors.background, label: 'body text' },
    { text: theme.colors.textMuted, bg: theme.colors.background, label: 'muted text' },
    { text: theme.colors.textInverse, bg: theme.colors.primary, label: 'primary text' },
  ];

  const results = pairs.map(pair => {
    const check = wcagContrastChecker(pair.text, pair.bg);
    return {
      element: pair.label,
      contrast: check.regularText.aa ? 'PASS' : 'FAIL',
      ratio: check.regularText.ratio,
      required: 4.5,
    };
  });

  const failures = results.filter(r => r.contrast === 'FAIL');
  if (failures.length > 0) {
    console.error('WCAG AA violations:', failures);
    throw new Error('Theme fails WCAG AA requirements');
  }

  console.table(results);
  return results;
}
```

**Pre-commit Hook Example:**
```json
// package.json
{
  "scripts": {
    "validate:contrast": "ts-node scripts/validate-contrast.ts"
  },
  "husky": {
    "hooks": {
      "pre-commit": "npm run validate:contrast"
    }
  }
}
```

**Manual Testing Tools:**
- WebAIM Contrast Checker (webaim.org/resources/contrastchecker)
- axe DevTools (browser extension)
- Google Lighthouse (built-in)

### 3.2 Extended Palette Generation

**Tool: @palettebro/generator**
```bash
npm install @palettebro/generator
```

**Generation Script:**
```typescript
// scripts/generate-turquoise-palette.ts
import { generatePalette } from '@palettebro/generator';

const palette = generatePalette('#00CED1', {
  format: 'css',
  colorSpace: 'oklch',  // Perceptual uniformity
  shades: 10,  // 50-950 scale
  harmony: 'monochromatic',
});

console.log(palette);
// Outputs:
// --color-turquoise-50: #E0FFFF;
// --color-turquoise-100: #BFFFFD;
// ...
// --color-turquoise-950: #000808;
```

**Alternative: Manual OKLCH Calculation**
```typescript
import { oklch } from 'culori';

const base = oklch('#00CED1');
// Lightness: 0-1, Chroma: 0-0.4, Hue: 0-360

const shades = Array.from({ length: 10 }, (_, i) => {
  const lightness = 0.15 + (i * 0.07); // 15% to 78%
  return oklch({ l: lightness, c: base.c * 0.9, h: base.h });
});
```

**Integration with Nuxt UI:**
```css
@theme {
  /* Extend Nuxt UI's color system */
  @each 50, 100, 200, 300, 400, 500, 600, 700, 800, 900, 950 {
    --color-turquoise-@{it}: #{shade_value};
  }
}
```

### 3.3 Syntax Highlighting Integration

**Shiki for Nuxt:**
```typescript
// nuxt.config.ts
export default defineNuxtConfig({
  modules: ['@nuxtjs/shiki'],
  shiki: {
    theme: 'poimandres',  // Custom theme
    dualTheme: {
      light: 'github-light',
      dark: 'poimandres',
    },
  },
});
```

**Custom Shiki Theme Definition:**
```typescript
// themes/poimandres.ts
import type { ShikiTheme } from 'shiki';

export const poimandresTheme: ShikiTheme = {
  name: 'poimandres',
  bg: '#1b1e28',
  fg: '#a6accd',
  settings: [
    {
      scope: ['comment'],
      settings: {
        foreground: '#767c9d',  // Muted gray
      },
    },
    {
      scope: ['keyword'],
      settings: {
        foreground: '#91B4D5',  // Desaturated blue
      },
    },
    {
      scope: ['string'],
      settings: {
        foreground: '#00CED1',  // Strong turquoise
      },
    },
    {
      scope: ['entity.name.function', 'support.function'],
      settings: {
        foreground: '#5DE4c7',  // Bright mint
      },
    },
    {
      scope: ['entity.name.type', 'support.type'],
      settings: {
        foreground: '#ADD7FF',  // Light blue (slightly darker)
      },
    },
    {
      scope: ['constant', 'variable'],
      settings: {
        foreground: '#00CED1',  // Strong turquoise
      },
    },
    {
      scope: ['entity.name.tag'],
      settings: {
        foreground: '#91B4D5',  // Desaturated blue
      },
    },
    {
      scope: ['invalid.illegal'],
      settings: {
        foreground: '#d0679d',  // Hot red
      },
    },
  ],
};
```

**CSS Variables Theme (for runtime switching):**
```typescript
import { createCssVariablesTheme } from 'shiki';

const poimandresCssTheme = createCssVariablesTheme({
  name: 'poimandres',
  variablePrefix: '--shiki',
  colors: {
    'bg': '#1b1e28',
    'fg': '#a6accd',
    'comment': '#767c9d',
    'keyword': '#91B4D5',
    'string': '#00CED1',
    'function': '#5DE4c7',
    'type': '#ADD7FF',
    'constant': '#00CED1',
  },
});
```

## 4. Common Pitfalls

### 4.1 Dark Theme Pitfalls

**Pitfall 1: Pure Black Background**
```css
/* ❌ BAD */
--background: #000000;  /* Too harsh, eye strain */

/* ✅ GOOD */
--background: #1b1e28;  /* Soft dark blue-gray */
```
**Why:** Pure black creates high contrast that causes eye strain. Use dark grays or dark blue-grays (15-25% lightness).

**Pitfall 2: Saturated Accent Colors**
```css
/* ❌ BAD */
--primary: #00FF00;  /* Too saturated, fails WCAG */

/* ✅ GOOD */
--primary: #00CED1;  /* Desaturated, passes WCAG */
```
**Why:** Saturated colors on dark backgrounds cause readability issues and often fail WCAG. Reduce chroma by 10-20%.

**Pitfall 3: Insufficient Contrast for Muted Text**
```css
/* ❌ BAD */
--text-muted: #506477;  /* 35% lightness, fails 4.5:1 on #1b1e28 */

/* ✅ GOOD */
--text-muted: #767c9d;  /* 58% lightness, passes 4.5:1 */
```
**Why:** Muted text needs 4.5:1 contrast minimum. Calculate contrast for every text/background pair.

**Pitfall 4: Inverted Color Pairs**
```css
/* ❌ BAD - Simple inversion fails WCAG */
--background-light: #1b1e28;
--text-light: #a6accd;  /* Only 3.2:1 contrast */

/* ✅ GOOD - Calculate WCAG-compliant pairs */
--background-light: #e4f0fb;
--text-light: #1b1e28;  /* 12.5:1 contrast */
```
**Why:** Direct inversion rarely meets WCAG. Use contrast calculator or palette generator.

### 4.2 Contrast Validation Pitfalls

**Pitfall 1: Validating Against Wrong Background**
```typescript
/* ❌ BAD - Only validates one pairing */
validateContrast(text, bg);

/* ✅ GOOD - Validates all combinations */
validateAllContrasts() {
  validateContrast(primaryText, background);
  validateContrast(primaryText, cardBackground);
  validateContrast(primaryText, inputBackground);
  validateContrast(mutedText, background);
  // ... etc
}
```

**Pitfall 2: Forgetting Large Text Rule**
```typescript
/* ❌ BAD - Applies 4.5:1 to everything */
if (contrastRatio < 4.5) fail();

/* ✅ GOOD - Respects large text exemption */
const isLargeText = fontSize >= 18 || (fontSize >= 14 && fontWeight >= 700);
const requiredRatio = isLargeText ? 3.0 : 4.5;
if (contrastRatio < requiredRatio) fail();
```

**Pitfall 3: Ignoring Non-Text UI Elements**
```typescript
/* ❌ BAD - Only validates text */
validateTextColors();

/* ✅ GOOD - Validates icons, borders, separators */
validateUIElements() {
  validateContrast(iconColor, iconBackground);
  validateContrast(borderColor, borderColor);
  validateContrast(separatorColor, separatorBackground);
  // UI components need 3:1 minimum
}
```

### 4.3 Token Naming Pitfalls

**Pitfall 1: Mixing Naming Conventions**
```css
/* ❌ BAD - Inconsistent casing */
--primary-color: #00CED1;
--text_Muted: #767c9d;
--bgPanel: #303340;

/* ✅ GOOD - Consistent kebab-case */
--ui-primary: #00CED1;
--text-muted: #767c9d;
--bg-panel: #303340;
```

**Pitfall 2: Over-Semantic Naming**
```css
/* ❌ BAD - Too specific */
--button-primary-submit-form-bg: #00CED1;

/* ✅ GOOD - Proper abstraction */
--ui-primary: #00CED1;
```

**Pitfall 3: Token Hierarchy Violation**
```css
/* ❌ BAD - Component token references core directly */
--button-bg: #00CED1;  /* Hardcoded, can't change primary globally */

/* ✅ GOOD - Component token references semantic */
--button-bg: var(--ui-primary);
--ui-primary: var(--color-brand-500);  /* Single source of truth */
```

### 4.4 Shadcn-vue Integration Pitfalls

**Pitfall 1: Missing Dark Mode Class**
```html
<!-- ❌ BAD - No dark mode support -->
<html>

<!-- ✅ GOOD - System detection + class toggle -->
<html class="dark">  <!-- Manual or via script -->
<!-- OR -->
<html>  <!-- Auto via prefers-color-scheme -->
```

**Pitfall 2: Variable Name Conflicts**
```css
/* ❌ BAD - Shadcn and Nuxt UI use different names */
--background: #1b1e28;        /* Shadcn */
--ui-background: #1b1e28;     /* Nuxt UI */

/* ✅ GOOD - Unified naming */
--ui-background: #1b1e28;      /* Used by both */
--ui-foreground: #a6accd;
```

**Pitfall 3: Missing `dark:` Variants**
```typescript
// ❌ BAD - Only defines light mode
colors: {
  primary: {
    value: '#00CED1',
  },
}

// ✅ GOOD - Defines both modes
colors: {
  primary: {
    dark: '#00CED1',
    light: '#5DE4c7',
  },
}
```

## 5. Poimandres Aesthetic Definition

### 5.1 Core Characteristics

**Minimal & Frameless:**
- Clean, uncluttered interface
- No unnecessary borders or decorative elements
- Focus on content with minimal visual noise

**Semantic Color Coding:**
- Errors/throws: Red (`#d0679d`)
- Success/new/growth: Green/turquoise (`#00CED1`)
- Types/interface: Desaturated/blue-gray (`#91B4D5`, slightly darker than content)
- Functions/calls: Bright mint (`#5DE4c7`)
- Keywords/operators: Desaturated blue (`#91B4D5`)
- Strings/constants: Strong turquoise (`#00CED1`)

**Subtle Hierarchy:**
- Background: Dark blue-gray (`#1b1e28`, 22% lightness)
- Panels/elements: Slightly lighter (`#303340`, 24% lightness)
- Primary text: Light gray-blue (`#a6accd`, 75% lightness)
- Muted text: Muted gray (`#767c9d`, 58% lightness)
- Accents: Mint/turquoise for emphasis (`#5DE4c7`, `#00CED1`)

### 5.2 Visual Hierarchy

**Backgrounds (darkest to lightest):**
1. `#1b1e28` - Main background (22% L)
2. `#303340` - Panels/focused elements (24% L)
3. `#404b5c` - Elevated/active elements (30% L)

**Text (lightest to darkest):**
1. `#e4f0fb` - Off-white/heading (99% L)
2. `#a6accd` - Primary text (75% L)
3. `#767c9d` - Muted/secondary text (58% L)
4. `#506477` - Disabled/very muted (45% L)

**Accents (by importance):**
1. `#00CED1` - Primary success/action (strong turquoise, 81% L)
2. `#5DE4c7` - Secondary/soft action (bright mint, 70% L)
3. `#ADD7FF` - Tertiary/info (light blue, 88% L)
4. `#d0679d` - Error (hot red, 52% L)
5. `#fffac2` - Warning (bright yellow, 99% L)

**Key Pattern:** Types are slightly darker than code content (`#91B4D5` vs `#ADD7FF`) to "let spotlight be on code."

### 5.3 Color Relationships

**Turquoise/Mint Family (core identity):**
- Strong turquoise (`#00CED1`) - Primary accent, success state
- Bright mint (`#5DE4c7`) - Secondary accent, info state
- These colors should be visually balanced: turquoise is deeper, mint is lighter

**Gray-Blue Family (neutral hierarchy):**
- `#506477` - Blue-gray base
- `#767c9d` - Muted gray (for secondary text)
- `#a6accd` - Light gray-blue (primary text)
- `#91B4D5` - Desaturated blue (types, keywords)

**Contrast Pairs (WCAG AA validated):**
| Foreground | Background | Ratio | Status |
|-----------|-----------|-------|--------|
| `#a6accd` | `#1b1e28` | 7.2:1 | ✅ AAA |
| `#767c9d` | `#1b1e28` | 4.7:1 | ✅ AA |
| `#506477` | `#1b1e28` | 3.3:1 | ⚠️ AA (large text only) |
| `#00CED1` | `#1b1e28` | 6.8:1 | ✅ AAA |
| `#5DE4c7` | `#1b1e28` | 5.9:1 | ✅ AAA |

### 5.4 Implementation Guidelines

**Do:**
- Use `#1b1e28` as primary background
- Keep text at 75%+ lightness for primary, 58%+ for secondary
- Reserve turquoise/mint for accents and success states
- Use red (`#d0679d`) exclusively for errors/deletes
- Keep types slightly darker than functional code
- Minimize borders (use background differences instead)
- Use subtle hover states (5-10% lightness increase)

**Don't:**
- Use pure black (`#000000`) or pure white (`#FFFFFF`)
- Over-saturate accent colors
- Add decorative borders or shadows
- Use too many accent colors (stick to turquoise/mint + error/warning)
- Make types brighter than functional code
- Create heavy contrasts (keep hierarchy subtle)

**Reference Implementation:**
VS Code theme file: `drcmda/poimandres-theme`
- Full token reference
- Semantic color mapping
- Syntax highlighting rules

## 6. Theme Toggle Foundation

### 6.1 Theme Detection Pattern

**System Preference (Automatic):**
```html
<!-- Detects OS setting -->
<html>
<script>
if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
  document.documentElement.classList.add('dark');
}
</script>
```

**User Preference (Persistent):**
```typescript
// composables/useTheme.ts
export const useTheme = () => {
  const theme = useCookie('theme', { default: 'dark' });

  const setTheme = (value: 'light' | 'dark') => {
    theme.value = value;
    if (value === 'dark') {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  };

  return { theme, setTheme };
};
```

**Hybrid Approach (Recommended):**
```typescript
// System preference as default, user can override
export const useTheme = () => {
  const userTheme = useCookie('theme');
  const systemTheme = computed(() =>
    window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
  );

  const activeTheme = computed(() => userTheme.value || systemTheme.value);

  watch(activeTheme, (value) => {
    if (value === 'dark') {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  });

  return { theme: activeTheme, setTheme: (t: 'light' | 'dark') => { userTheme.value = t; } };
};
```

### 6.2 Nuxt 4 Dark Mode Configuration

```typescript
// nuxt.config.ts
export default defineNuxtConfig({
  colorMode: {
    preference: 'dark',      // Default to dark
    fallback: 'dark',         // Fallback if no system preference
    classSuffix: '',         // Add 'dark' class (not 'dark-mode')
    storageKey: 'nuxt-color-mode',
  },
});
```

**Usage in Components:**
```vue
<template>
  <!-- Automatic based on active theme -->
  <div class="bg-background text-foreground">
    Content
  </div>

  <!-- Manual override -->
  <div class="dark:bg-gray-900 dark:text-white">
    Dark-specific styles
  </div>
</template>
```

## 7. Implementation Checklist

**Phase 1 Success Criteria Validation:**

- [ ] **Dark theme active with Poimandres aesthetic**
  - [ ] Background: `#1b1e28` (soft dark blue-gray)
  - [ ] Primary text: `#a6accd` (75% lightness)
  - [ ] Accents: turquoise/mint family
  - [ ] Types slightly darker than code

- [ ] **All color pairs meet WCAG AA**
  - [ ] Primary text/background: ≥4.5:1 ✅ (7.2:1)
  - [ ] Muted text/background: ≥4.5:1 ✅ (4.7:1)
  - [ ] Disabled text: ≥3:1 for large text ⚠️ (3.3:1)
  - [ ] Accent/background: ≥4.5:1 ✅ (6.8:1)
  - [ ] Icons/borders: ≥3:1

- [ ] **Extended turquoise palette (5-7 shades)**
  - [ ] Darkest: ~15-20% lightness
  - [ ] Lightest: ~80-90% lightness
  - [ ] Base: `#00CED1` (81% lightness)
  - [ ] OKLCH-based for perceptual uniformity
  - [ ] All shades pass WCAG AA on background

- [ ] **Syntax highlighting works across languages**
  - [ ] Comments: `#767c9d` (muted gray)
  - [ ] Keywords: `#91B4D5` (desaturated blue)
  - [ ] Strings/constants: `#00CED1` (strong turquoise)
  - [ ] Functions: `#5DE4c7` (bright mint)
  - [ ] Types: `#ADD7FF` (light blue, darker than content)
  - [ ] Errors: `#d0679d` (hot red)

- [ ] **Semantic tokens defined**
  - [ ] Core: `--color-*` primitives (50-950 scale)
  - [ ] Extensions: `--ui-*` semantic mappings
  - [ ] Components: `--button-*`, `--card-*`, etc.
  - [ ] Three-layer hierarchy enforced
  - [ ] No circular references

- [ ] **Theme toggle foundation in place**
  - [ ] System preference detection
  - [ ] User preference persistence (localStorage/cookie)
  - [ ] `dark` class toggling
  - [ ] Hydrate theme on page load
  - [ ] Smooth transitions (CSS `transition`)

## 8. Key Resources

### 8.1 Documentation
- [Nuxt UI Theming](https://ui.nuxt.com/docs/getting-started/theme) - Official theming guide
- [Shadcn-vue Theming](https://shadcn-vue.com/docs/theming) - Component theming patterns
- [Tailwind v4 Guide](https://tailwindcss.com/blog/tailwindcss-v4-alpha) - `@theme` directive
- [WCAG 2.2 Guidelines](https://www.w3.org/WAI/WCAG22/quickref/) - Accessibility requirements
- [Poimandres Theme](https://github.com/drcmda/poimandres-theme) - Reference implementation

### 8.2 Tools & Libraries
- [@palettebro/generator](https://www.npmjs.com/package/@palettebro/generator) - Palette generation with OKLCH
- [a11y-color-contrast](https://www.npmjs.com/package/a11y-color-contrast) - WCAG validation
- [accessible-colors](https://www.npmjs.com/package/accessible-colors) - AA/AAA color generation
- [Shiki](https://shiki.style/) - Syntax highlighting engine
- [Culori](https://culori.com/) - Color space manipulation (OKLCH)

### 8.3 Validation Tools
- [WebAIM Contrast Checker](https://webaim.org/resources/contrastchecker)
- [axe DevTools](https://www.deque.com/axe/devtools/) - Browser extension
- [Google Lighthouse](https://developers.google.com/web/tools/lighthouse) - Accessibility audit
- [WAVE](https://wave.webaim.org/) - Automated accessibility testing

---

*Research completed for Phase 1: Dark Theme Foundation*
*Ready for detailed planning*
